---
title: åšå®¢åŠŸèƒ½æ·»åŠ å®Œå–„ï¼
date: 2022/07/04 20:45:48
categories:
 - [å»ºç«™æ—¥å¿—]
tags:
 - å°ç ´ç«™åŸºå»ºè®°å½•
fancybox: false
description: "åšå®¢åŠŸèƒ½æ·»åŠ ä¸ä¸ªäººè¸©å‘æŒ‡å—ğŸ’ª"
---

+++danger æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹
ç½‘æ˜“äº‘éŸ³ä¹ä½äºç½‘ç«™å·¦ä¸‹æ–¹ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ç½‘æ˜“äº‘éŸ³ä¹çš„æ­Œå•ç½‘å€ï¼Œé€šè¿‡[config.yml]{.yellow}ä¸‹é…ç½®[audio]{.red}å³å¯,å¡«å…¥è‡ªå·±å–œæ¬¢çš„æ­Œå•åœ°å€ï¼Œæ”¯æŒå¤šä¸ª
+++

+++warning æ·»åŠ githubè´¡çŒ®å›¾æ ‡
ä¸‹è½½æ’ä»¶ hexo-filter-gitcalendarå†åœ¨configä¸­é…ç½®ï¼Œå°†å…¶æ”¾å…¥main idæ ‡ç­¾ä¸­
+++

+++success Github Actionä¸ºåšå®¢æ·»åŠ è‡ªåŠ¨åŒ–CI
å› ä¸ºåšå®¢çš„æºç å’Œå†™åšå®¢çš„æºç æ˜¯ä¸¤ä»½ä¸”åœ¨ä¸åŒåˆ†æ”¯ä¸‹ï¼Œæ‰€ä»¥æ¯æ¬¡å†™å®Œéƒ½è¦å…ˆç”¨Hexoå‘½ä»¤æ„å»ºéƒ¨ç½²åˆ°è¿œç«¯ï¼Œç„¶åå†å°†æœ¬åœ°çš„mdæ–‡ç« pushåˆ°å¦ä¸€æ¡åˆ†æ”¯ï¼Œè™½ç„¶ä¸æ˜¯ä»€ä¹ˆå¤§äº‹ï¼Œä½†å®é™…ä¸Šè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ä¸”è€—æ—¶é—´çš„ï¼Œå› ä¸ºè¦ç­‰å¾…åšå®¢æ„å»ºéƒ¨ç½²
åœ¨ç™¾åº¦æ—¶å…¬å¸é¡¹ç›®æ˜¯ä½¿ç”¨github CIå®ç°è‡ªåŠ¨åŒ–çš„ï¼Œç°åœ¨åœ¨He3åšé¡¹ç›®åˆ™æ˜¯ä½¿ç”¨Github Actionå°†prè‡ªåŠ¨è¿›è¡Œæµ‹è¯•ï¼Œç§‰æ‰¿ç€èƒ½å°‘ä¸€ä»½å·¥ä½œå°±å°‘ä¸€ä»½å·¥ä½œçš„åŸåˆ™ï¼Œæˆ‘å†³å®šå®ç°å°†mdåšå®¢pushä¹‹åè‡ªåŠ¨ç”¨Github Actionéƒ¨ç½²
é¦–å…ˆç»ˆç«¯è¾“å…¥`ssh-keygen -f github-deploy-key`ç”Ÿæˆç§˜é’¥ï¼Œå°†pubå…¬é’¥æ·»åŠ åˆ°é¡¹ç›®Settingä¸‹çš„Deploy keysä¸­ï¼ˆæ³¨æ„ä¸‹æ–¹`Allow Write access`è¦å‹¾ä¸Šï¼‰ï¼Œå°†ç§é’¥æ·»åŠ åˆ°Secretsçš„Actionsä¸­ï¼Œç„¶ååœ¨å†™åšå®¢çš„åˆ†æ”¯ä¸‹çš„`.github`ç›®å½•ä¸‹æ–°å»º`workflows`ç›®å½•å¹¶æ–°å»ºxxx.ymlï¼Œç„¶åå°†ä»£ç cvè¿›å»

```yml
# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      - name: Checkout source
        uses: actions/checkout@v3
        with:
            ref: master

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
              node-version: '16'

      - name: Setup Hexo
        env: 
                # ACTION_DEPLOY_KEY
                ACTION_DEPLOY_KEY: ${{ secrets.ACTION_DEPLOY_KEY }}
        run: |
                    mkdir -p ~/.ssh/
                    echo "$ACTION_DEPLOY_KEY"> ~/.ssh/id_rsa
                    chmod 700 ~/.ssh
                    chmod 600 ~/.ssh/id_rsa
                    ssh-keyscan github.com >> ~/.ssh/known_hosts
                    git config --global user.email "962475158@qq.com"
                    git config --global user.name "EvilMoOd"
                    npm install hexo-cli -g
                    npm install
      - name: Deploy
        run: |
            hexo clean
            hexo deploy
```

è¿™é‡Œä¸»è¦è¸©äº†ä»¥ä¸‹çš„å‘

1. nodeç‰ˆæœ¬ä½ï¼Œå› ä¸ºcvçš„åˆ«äººçš„ä»£ç ï¼Œæ‰€ä»¥éœ€è¦å‡çº§ä¸€ä¸‹nodeç‰ˆæœ¬`actions/setup-node@v3`
2. `fatal: could not read Username for 'https://github.com': No such device or address`è¿™ä¸ªé—®é¢˜è§£å†³äº†å¥½ä¹…ï¼Œä¸€ç›´å¡åœ¨è¿™é‡Œ
3. åœ¨æˆ‘åå¤è®¾ç½®ç§˜é’¥ä»¥åŠç¡®å®šå…¶ä»–åœ°æ–¹æ²¡é—®é¢˜åï¼Œæˆ‘å¼€å§‹æ‰¾åˆ°hexo-deploy-gitè¿™ä¸ªé¡¹ç›®ä¸‹çš„issueï¼Œæ‰€å¹¸æˆ‘æ‰¾åˆ°äº†è§£å†³æ–¹æ³•ï¼Œåœ¨å†™åšå®¢åˆ†æ”¯ä¸‹çš„`_config.yml`ä¸­ï¼Œæ›´æ–°deployçš„gitåœ°å€ï¼Œå°†httpsæ”¹æˆSSHï¼Œç»ˆäºæˆåŠŸäº†

+++
